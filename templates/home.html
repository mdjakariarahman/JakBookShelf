{% extends 'base.html' %}
{% load static %}

{% block content %}

<!-- Font Awesome for search icon -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
  body {
    font-family: Arial;
  }

  * {
    box-sizing: border-box;
  }

  form.example input[type=text] {
    padding: 10px;
    font-size: 17px;
    border: 1px solid grey;
    float: left;
    width: 80%;
    background: #f1f1f1;
  }

  form.example button {
    float: left;
    width: 20%;
    padding: 10px;
    background: #2196F3;
    color: white;
    font-size: 17px;
    border: 1px solid grey;
    border-left: none;
    cursor: pointer;
  }

  form.example button:hover {
    background: #0b7dda;
  }

  form.example::after {
    content: "";
    clear: both;
    display: table;
  }
</style>

<!-- Banner Section -->
<div class="banner">
  <div class="container">
    <div class="row">
      <div class="col-md-12 text-center">
        <div class="caption">
          <h2>BOOK IS THE BEST FRIEND</h2>
          <div class="line-dec"></div>
          <p>
            Satirtho Prokashona is one of the best online bookshops in Bangladesh. <strong>Total royalty included</strong>.
            You can buy books of any category.<br><br>
            Share <a href="https://www.facebook.com/satirtho.bd/" target="_blank">Satirtho Prokashona</a> with your friends! 
            Photo credits: <a href="https://www.rokomari.com" target="_blank">Rokomari</a>.
          </p>
          <div class="main-button">
            <a href="#">Order Now!</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- Featured Starts Here -->
  <div class="featured-items">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div class="section-heading">
            <div class="line-dec"></div>
            <h1>Featured Items</h1>
          </div>
        </div>
        <div class="col-md-12">
          <div class="owl-carousel owl-theme">
            <a href="single-product.html">
              <div class="featured-item">
                <img src="{% static 'assets/images/item-01.jpg' %}" alt="Item 1">
                <h4>ANASHWAR</h4>
                <h6>215.00</h6>
              </div>
            </a>
            <a href="single-product.html">
              <div class="featured-item">
                <img src="{% static 'assets/images/item-02.jpg' %}" alt="Item 2">
                <h4>SUNDORBONE SAAT BOCHOR</h4>
                <h6>225.00</h6>
              </div>
            </a>
            <a href="single-product.html">
              <div class="featured-item">
                <img src="{% static 'assets/images/item-03.jpg' %}" alt="Item 3">
                <h4>CHANDER PAHAR</h4>
                <h6>235.00</h6>
              </div>
            </a>
            <a href="single-product.html">
              <div class="featured-item">
                <img src="{% static 'assets/images/item-04.jpg' %}" alt="Item 4">
                <h4>ICHAMOTI</h4>
                <h6>145.00</h6>
              </div>
            </a>
            <a href="single-product.html">
              <div class="featured-item">
                <img src="{% static 'assets/images/item-05.jpg' %}" alt="Item 5">
                <h4>ARANYAK</h4>
                <h6>195.00</h6>
              </div>
            </a>
            <a href="single-product.html">
              <div class="featured-item">
                <img src="{% static 'assets/images/item-06.jpg' %}" alt="Item 6">
                <h4>POTHER PANCHALI</h4>
                <h6>265.00</h6>
              </div>
            </a>
            <a href="single-product.html">
              <div class="featured-item">
                <img src="{% static 'assets/images/item-07.jpg' %}" alt="Item 7">
                <h4>OPORAJITO</h4>
                <h6>275.00</h6>
              </div>
            </a>
            <a href="single-product.html">
              <div class="featured-item">
                <img src="{% static 'assets/images/item-08.jpg' %}" alt="Item 8">
                <h4>DEVJAN</h4>
                <h6>185.00</h6>
              </div>
            </a>
            <a href="single-product.html">
              <div class="featured-item">
                <img src="{% static 'assets/images/item-09.jpg' %}" alt="Item 9">
                <h4>UPEKKHITA</h4>
                <h6>195.00</h6>
              </div>
            </a>
            <a href="single-product.html">
              <div class="featured-item">
                <img src="{% static 'assets/images/item-10.jpg' %}" alt="Item 10">
                <h4>DUI BARI</h4>
                <h6>185.00</h6>
              </div>
            </a>
            <a href="single-product.html">
              <div class="featured-item">
                <img src="{% static 'assets/images/item-11.jpg' %}" alt="Item 11">
                <h4>NISHIPODDO</h4>
                <h6>195.00</h6>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Featred Ends Here -->

<!-- Search Form -->
<form method="POST" class="example" action="" style="margin:auto;max-width:500px">
  {% csrf_token %}
  <input type="text" placeholder="Search.." name="search">
  <button type="submit"><i class="fa fa-search"></i></button>
</form>

<br>

<!-- Book Card Grid -->
<div class="container-fluid d-flex justify-content-center align-items-center">
  <div class="row w-100">
    {% if results %}
      {% for book in results %}
        <div class="col-lg-4 mb-4">
          <div class="card mx-auto" style="width:18rem;">
            <a href="#" class="building-link" 
              data-toggle="modal" data-target="#exampleModalCenter"
              data-name="{{ book.title }}"
              data-description="{{ book.description }}"
              data-img="{{ book.cover_image.url }}"
              data-author="{{ book.author }}"
              data-price="{{ book.price }}">
              <img class="card-img-top" src="{{ book.cover_image.url }}" style="height: 300px; width: 100%;" alt="{{ book.title }}">
            </a>
            <div class="card-body">
              <h5 class="card-title">{{ book.title }}</h5>
              <h6 class="card-subtitle mb-2 text-muted">{{ book.author }}</h6>
              <p class="card-text">{{ book.description }}</p>
              <p class="card-text text-primary"><strong>Price:</strong> {{ book.price }} &#x09F3;</p>
              <center>
                <a href="#" class="btn btn-primary">Buy Now</a>
                <a href="#" class="btn btn-primary">Add to Cart</a>
              </center>
            </div>
          </div>
        </div>
      {% endfor %}
    {% else %}
      {% for book in books %}
        <div class="col-lg-4 mb-4">
          <div class="card mx-auto" style="width:18rem;">
            <a href="#" class="building-link" 
              data-toggle="modal" data-target="#exampleModalCenter"
              data-name="{{ book.title }}"
              data-description="{{ book.description }}"
              data-img="{{ book.cover_image.url }}"
              data-author="{{ book.author }}"
              data-price="{{ book.price }}">
              <img class="card-img-top" src="{{ book.cover_image.url }}" style="height: 300px; width: 100%;" alt="{{ book.title }}">
            </a>
            <div class="card-body">
              <h5 class="card-title">{{ book.title }}</h5>
              <h6 class="card-subtitle mb-2 text-muted">{{ book.author }}</h6>
              <p class="card-text">{{ book.description }}</p>
              <p class="card-text text-primary"><strong>Price:</strong> {{ book.price }} &#x09F3;</p>
              <center>
                <a href="#" class="btn btn-primary">Buy Now</a>
                <a href="#" class="btn btn-primary">Add to Cart</a>
              </center>
            </div>
          </div>
        </div>
      {% endfor %}
    {% endif %}
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="building-name"></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span>&times;</span></button>
      </div>
      <div class="modal-body">
        <img id="building-img" src="" alt="Book Cover" style="width: 20%; height: auto;">
        <p id="building-description" class="mt-2"></p>
        <p><strong>Author:</strong> <span id="building-author"></span></p>
        <p><strong>Price:</strong> <span id="building-price"></span> &#x09F3;</p>
      </div>
    </div>
  </div>
</div>

<!-- Subscribe Form -->
<div class="subscribe-form">
  <div class="container">
    <div class="section-heading text-center">
      <div class="line-dec"></div>
      <h1>Subscribe on JAKBOOKSHELF now!</h1>
    </div>
    <div class="row justify-content-center">
      <div class="col-md-8">
        <p class="text-center">Stay updated with our latest books and discounts. Enter your email to subscribe!</p>
        <form id="subscribe" action="" method="get">
          <div class="form-row">
            <div class="col-md-8">
              <input name="email" type="text" class="form-control" placeholder="Your Email..." required>
            </div>
            <div class="col-md-4">
              <button type="submit" id="form-submit" class="btn btn-success btn-block">Subscribe Now!</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- jQuery Script for Modal -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script>
  $(document).ready(function () {
    $('.building-link').click(function () {
      $('#building-name').text($(this).data('name'));
      $('#building-description').text($(this).data('description'));
      $('#building-img').attr('src', $(this).data('img'));
      $('#building-author').text($(this).data('author'));
      $('#building-price').text($(this).data('price'));
    });
  });
</script>

{% endblock %}
